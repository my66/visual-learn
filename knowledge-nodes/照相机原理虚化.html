<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰©ç†è€å¸ˆçš„å…‰å­¦å®éªŒå®¤ - æ™¯æ·±ä¸è™šåŒ–ç‰¹ä¾›ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; }
        body { background-color: #f1f5f9; font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif; display: flex; flex-direction: column; }
        #root { height: 100%; display: flex; flex-direction: column; }
        .term-card { transition: all 0.2s; font-size: 11px; line-height: 1.4; }
        .term-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); background-color: #fff; z-index: 10; }
        input[type=range] { height: 6px; border-radius: 3px; background: #e2e8f0; appearance: none; cursor: pointer; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: currentColor; margin-top: -5px; box-shadow: 0 1px 2px rgba(0,0,0,0.3); transition: transform 0.1s; }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.1); }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 6px; background: transparent; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        const Icon = ({ d, className, color }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke={color || "currentColor"} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}><path d={d}></path></svg>
        );
        const Icons = {
            Eye: (p) => <Icon d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" {...p} />,
            Lock: (p) => <Icon d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a7 7 0 00-14 0v2" {...p} />,
            Unlock: (p) => <Icon d="M8 11V9a4 4 0 118 0v2m-6 8h4" {...p} />,
            Light: (p) => <Icon d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" {...p} />,
        };

        const CameraOpticsLab = () => {
            const [lensMode, setLensMode] = useState('prime'); // é»˜è®¤å®šç„¦ï¼Œæ–¹ä¾¿æ¼”ç¤ºè™šåŒ–
            const [focalLength, setFocalLength] = useState(50); 
            const [aperture, setAperture] = useState(2.8);
            const [focusDistance, setFocusDistance] = useState(3.5);
            const [objectDistance, setObjectDistance] = useState(3.5); // ç»¿æ ‘è·ç¦»
            const [showLabels, setShowLabels] = useState(true);

            // å›ºå®šç¬¬äºŒæ£µæ ‘ï¼ˆçº¢æ ‘ï¼‰çš„ä½ç½®
            const bgTreeDistance = 8.0;

            const WIDTH = 800, HEIGHT = 380, AXIS_Y = HEIGHT / 2;
            const SENSOR_X = WIDTH - 80; 
            const canvasRef = useRef(null);

            // --- æ¨¡ç³Šåº¦è®¡ç®— ---
            // é€šç”¨å…¬å¼ï¼šæ ¹æ®ç‰©ä½“è·ç¦»ã€å¯¹ç„¦è·ç¦»ã€å…‰åœˆã€ç„¦è·è®¡ç®—æ¨¡ç³ŠåŠå¾„
            const calculateBlur = (objDist) => {
                const diff = Math.abs(focusDistance - objDist);
                // ç‰©ç†æ ¸å¿ƒï¼šå…‰åœˆå€¼(aperture)è¶Šå¤§(å­”è¶Šå°)ï¼Œåˆ†æ¯è¶Šå¤§ï¼Œblur è¶Šå°
                // ç„¦è·(focalLength)è¶Šé•¿ï¼Œblur è¶Šå¤§
                return Math.min((diff * 40 * (focalLength / 50)) / aperture, 20);
            };

            const blurGreen = calculateBlur(objectDistance);
            const blurRed = calculateBlur(bgTreeDistance);

            const getFOV = (dist) => {
                const distFactor = 2 / Math.max(0.5, dist);
                return (focalLength / 50) * distFactor;
            };

            const isInfinity = objectDistance > 20;

            // --- æ•™å­¦åˆ†æ ---
            const analysisText = useMemo(() => {
                const blurG = blurGreen.toFixed(1);
                const blurR = blurRed.toFixed(1);
                
                let title = "å½“å‰çŠ¶æ€ï¼š";
                let physics = [];
                let keyPoint = "";

                // åˆ¤æ–­å¯¹ç„¦ç›®æ ‡
                if (Math.abs(focusDistance - objectDistance) < 0.5) {
                    title += "å¯¹ç„¦åœ¨å‰æ™¯ (ç»¿æ ‘)";
                } else if (Math.abs(focusDistance - bgTreeDistance) < 0.5) {
                    title += "å¯¹ç„¦åœ¨èƒŒæ™¯ (çº¢æ ‘)";
                } else {
                    title += "å¤±ç„¦ (éƒ½ä¸æ¸…æ¥š)";
                }

                // å…‰åœˆå½±å“åˆ†æ
                if (aperture < 4) {
                    physics.push("å…‰åœˆå¤§ (å­”å¾„å¤§)ï¼šå…‰çº¿å…¥å°„é”¥è§’å¾ˆå¤§ã€‚");
                    physics.push("ç»“æœï¼šåªè¦ç¨å¾®æ²¡å¯¹å‡†ï¼Œå…‰çº¿å°±åœ¨ä¼ æ„Ÿå™¨ä¸Šæ•£å¼€æˆå¤§å…‰æ–‘ã€‚");
                    keyPoint = "èƒŒæ™¯è™šåŒ–å¼ºï¼Œåªæœ‰ç„¦ç‚¹å¤„æ¸…æ™°";
                } else if (aperture > 11) {
                    physics.push("å…‰åœˆå° (å­”å¾„å°)ï¼šå…‰æŸè¢«æ”¶ç¼©å¾—å¾ˆç»† (åƒæ¿€å…‰)ã€‚");
                    physics.push("ç»“æœï¼šå³ä½¿æ²¡å¯¹å‡†ç„¦ï¼Œæ•£å¼€çš„å…‰æ–‘ä¹Ÿå¾ˆå°ï¼Œäººçœ¼è§‰å¾—å®ƒæ˜¯æ¸…æ™°çš„ã€‚");
                    keyPoint = "æ™¯æ·±å¤§ï¼Œå‰åéƒ½æ¸…æ™°";
                } else {
                    physics.push("å…‰åœˆé€‚ä¸­ï¼šå¹³è¡¡äº†è¿›å…‰é‡å’Œè™šåŒ–ç¨‹åº¦ã€‚");
                    keyPoint = "æ ‡å‡†çš„æ™¯æ·±è¡¨ç°";
                }

                return { title, physics, keyPoint, blurG, blurR };
            }, [focusDistance, objectDistance, aperture, blurGreen, blurRed]);

            // --- ç»˜å›¾å¾ªç¯ ---
            useEffect(() => {
                const ctx = canvasRef.current.getContext('2d');
                ctx.clearRect(0, 0, WIDTH, HEIGHT);

                // 1. åæ ‡ç³»
                ctx.setLineDash([4, 4]); ctx.strokeStyle = '#cbd5e1';
                ctx.beginPath(); ctx.moveTo(0, AXIS_Y); ctx.lineTo(WIDTH, AXIS_Y); ctx.stroke();
                ctx.setLineDash([]);

                ctx.fillStyle = '#3b82f6'; ctx.fillRect(SENSOR_X, AXIS_Y - 50, 4, 100);
                ctx.font = '10px Arial'; ctx.fillText("ä¼ æ„Ÿå™¨", SENSOR_X - 15, AXIS_Y + 65);

                // 2. å‡ ä½•è®¡ç®— (ä¸¤ä¸ªç‰©ä½“)
                const mapDistToX = (d) => (180 - ((Math.min(d, 12) - 0.5) / 11.5) * 150);
                const objX_Green = mapDistToX(objectDistance);
                const objX_Red = mapDistToX(bgTreeDistance);
                
                const frontLensX = 260 - (focalLength - 50); 
                const rearLensX = 460 + (focusDistance - 3.5) * 12;
                const safeRearX = Math.min(rearLensX, SENSOR_X - 50);
                const midX = (frontLensX + safeRearX) / 2;

                // 3. ç»˜åˆ¶é•œå¤´
                drawLens(ctx, frontLensX, 70, 18, '#bae6fd');
                drawLens(ctx, midX - 15, 50, -8, '#e0f2fe');
                drawLens(ctx, safeRearX, 60, 12, '#bae6fd');

                // 4. å…‰åœˆ
                const gap = 35 / (aperture / 2);
                ctx.fillStyle = '#1e293b';
                ctx.fillRect(midX - 1, AXIS_Y - 45, 2, 45 - gap);
                ctx.fillRect(midX - 1, AXIS_Y + gap, 2, 45 - gap);

                // 5. ç»˜åˆ¶å…‰è·¯ (ä¸¤ç»„å…‰çº¿)
                // ç»¿å…‰æ±‡èšç‚¹
                const v_Green = SENSOR_X + (focusDistance - objectDistance) * 35;
                // çº¢å…‰æ±‡èšç‚¹ (å› ä¸ºçº¢æ ‘è¿œï¼Œåƒè·çŸ­ï¼Œæ‰€ä»¥åœ¨ç»¿åƒçš„å‰é¢)
                const v_Red = SENSOR_X + (focusDistance - bgTreeDistance) * 35;

                ctx.globalCompositeOperation = 'multiply'; // æ··åˆé¢œè‰²
                
                // ç»˜åˆ¶çº¢æ ‘å…‰è·¯ (èƒŒæ™¯ï¼Œå…ˆç”»)
                drawRays(ctx, objX_Red, frontLensX, safeRearX, v_Red, aperture, '#f87171', false); // Red
                // ç»˜åˆ¶ç»¿æ ‘å…‰è·¯ (å‰æ™¯ï¼Œåç”»)
                drawRays(ctx, objX_Green, frontLensX, safeRearX, v_Green, aperture, '#4ade80', true); // Green
                
                ctx.globalCompositeOperation = 'source-over';

                // 6. ç»˜åˆ¶ç‰©ä½“
                drawObject(ctx, objX_Red, bgTreeDistance, '#ef4444', 'èƒŒæ™¯æ ‘');
                drawObject(ctx, objX_Green, objectDistance, '#22c55e', 'å‰æ™¯æ ‘');

                // 7. æ ‡æ³¨
                if (showLabels) {
                    drawBlurCircleExplanation(ctx, SENSOR_X, v_Red, aperture);
                }

            }, [focalLength, aperture, focusDistance, objectDistance, showLabels]);

            const drawLens = (ctx, x, h, c, color) => {
                ctx.beginPath(); ctx.fillStyle = color; ctx.strokeStyle = '#0ea5e9'; ctx.lineWidth = 1;
                ctx.ellipse(x, AXIS_Y, Math.abs(c), h/2, 0, 0, 2 * Math.PI);
                ctx.fill(); ctx.stroke();
            };

            const drawRays = (ctx, x1, x2, x3, xTarget, ap, color, isMain) => {
                const rayOffsets = [0];
                // æ ¹æ®å…‰åœˆå†³å®šå…‰æŸå®½åº¦
                const maxSpread = 32 / (ap / 2.8); // f/2.8æ—¶æœ€å®½(32)ï¼Œå…‰åœˆè¶Šå°è¶Šçª„
                
                // ç”»è¾¹ç•Œå…‰çº¿
                if (maxSpread > 2) {
                    rayOffsets.push(-maxSpread, maxSpread);
                }
                
                ctx.lineWidth = isMain ? 1.5 : 1.0;
                ctx.strokeStyle = color;
                
                rayOffsets.forEach(offset => {
                    ctx.beginPath();
                    // è™šçº¿ç”»èƒŒæ™¯å…‰è·¯ï¼Œå®çº¿ç”»å‰æ™¯
                    if (!isMain) ctx.setLineDash([4, 4]); else ctx.setLineDash([]);
                    
                    ctx.moveTo(x1, AXIS_Y); // ä»ç‰©ä½“å‘å‡º
                    ctx.lineTo(x2, AXIS_Y + offset); // åˆ°ç¬¬ä¸€é•œç‰‡
                    ctx.lineTo(x3, AXIS_Y + offset * 0.7); // åˆ°æœ€åé•œç‰‡
                    ctx.lineTo(xTarget, AXIS_Y); // æ±‡èš
                    
                    // ç©¿è¿‡æ±‡èšç‚¹åçš„æ•£å¼€ (å…³é”®ï¼šå±•ç¤ºåœ¨ä¼ æ„Ÿå™¨ä¸Šçš„å…‰æ–‘)
                    const extendX = SENSOR_X + 60;
                    // ç®€å•çš„ç›¸ä¼¼ä¸‰è§’å½¢è®¡ç®—æ•£å¼€å¹…åº¦
                    const slope = (offset * 0.3) / (xTarget - x3); 
                    // è¿™é‡Œä¸ºäº†è§†è§‰æ•ˆæœç®€åŒ–ä¸€ä¸‹
                    ctx.lineTo(extendX, AXIS_Y - (offset * 0.4) * ((extendX - xTarget)/100)); 
                    
                    ctx.stroke();
                });
                ctx.setLineDash([]);
            };

            const drawObject = (ctx, x, dist, color, label) => {
                ctx.fillStyle = color;
                ctx.beginPath(); ctx.moveTo(x, AXIS_Y - 35); ctx.lineTo(x-10, AXIS_Y); ctx.lineTo(x+10, AXIS_Y); ctx.fill();
                ctx.fillStyle = '#78350f'; ctx.fillRect(x-2, AXIS_Y, 4, 10);
                ctx.fillStyle = color; ctx.font = '10px Arial'; ctx.textAlign = 'center';
                ctx.fillText(label, x, AXIS_Y + 25);
                ctx.fillStyle = '#64748b';
                ctx.fillText(`${dist.toFixed(1)}m`, x, AXIS_Y + 36);
            };

            // ä¸“é—¨ç”»ä¸€ä¸ªæ ‡æ³¨è§£é‡Šå¼¥æ•£åœ†
            const drawBlurCircleExplanation = (ctx, sensorX, focusPointX, ap) => {
                // å¦‚æœç„¦ç‚¹æ²¡åœ¨ä¼ æ„Ÿå™¨ä¸Š
                const diff = Math.abs(sensorX - focusPointX);
                if (diff > 10) {
                    const radius = Math.min(diff * 0.3 * (2.8/ap), 30); // ç¤ºæ„æ€§åŠå¾„
                    
                    // åœ¨ä¼ æ„Ÿå™¨ä½ç½®ç”»ä¸€ä¸ªå…‰æ–‘ç¤ºæ„
                    ctx.fillStyle = 'rgba(239, 68, 68, 0.2)'; // çº¢è‰²å…‰æ–‘
                    ctx.beginPath();
                    ctx.ellipse(sensorX, AXIS_Y, 4, radius, 0, 0, 2*Math.PI);
                    ctx.fill();

                    // æ ‡æ³¨
                    if (radius > 5) {
                        ctx.fillStyle = '#ef4444';
                        ctx.font = '10px Arial';
                        ctx.fillText("å…‰æ–‘(å¼¥æ•£åœ†)", sensorX + 10, AXIS_Y - radius - 5);
                    }
                }
            };

            const toggleMode = (m) => { setLensMode(m); if(m === 'prime') setFocalLength(50); };
            
            // é¢„è®¾åœºæ™¯åŠŸèƒ½
            const setSceneLargeAperture = () => {
                setAperture(1.4);
                setFocusDistance(3.5); // å¯¹ç„¦ç»¿æ ‘
                setObjectDistance(3.5);
            };
            const setSceneSmallAperture = () => {
                setAperture(16);
                setFocusDistance(3.5);
                setObjectDistance(3.5);
            };

            return (
                <div className="h-full w-full max-w-7xl mx-auto flex flex-col p-2 box-border">
                    <div className="flex-none flex items-center justify-between border-b border-gray-200 pb-2 mb-2 px-2">
                        <div className="flex items-center gap-2">
                            <div className="bg-indigo-600 text-white p-1.5 rounded-md"><Icons.Eye /></div>
                            <h1 className="text-base font-bold text-gray-800">ç‰©ç†è€å¸ˆçš„å…‰å­¦å®éªŒå®¤ <span className="text-xs font-normal text-gray-500 ml-2">v8.0 æ™¯æ·±ä¸å…‰åœˆç‰¹ä¾›ç‰ˆ</span></h1>
                        </div>
                        <div className="flex gap-2">
                            <button onClick={setSceneLargeAperture} className="px-2 py-1 bg-pink-50 text-pink-700 rounded text-xs border border-pink-200 hover:bg-pink-100 transition font-bold">
                                ğŸŒŸ å¤§å…‰åœˆ (è™šåŒ–)
                            </button>
                            <button onClick={setSceneSmallAperture} className="px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs border border-blue-200 hover:bg-blue-100 transition font-bold">
                                ğŸŒ„ å°å…‰åœˆ (æ¸…æ™°)
                            </button>
                        </div>
                    </div>

                    <div className="flex-1 flex gap-3 min-h-0 px-2 overflow-hidden">
                        <div className="flex-[3] flex flex-col gap-2 min-w-0">
                            <div className="flex-[2] bg-slate-900 rounded-lg relative border border-slate-700 overflow-hidden min-h-0">
                                <canvas ref={canvasRef} width={WIDTH} height={HEIGHT} className="w-full h-full object-contain" />
                                <div className="absolute top-2 left-2 text-slate-500 text-[10px] tracking-widest border border-slate-700 px-1 rounded">SIDE VIEW</div>
                                {/* ä¾§è§†å›¾å†…éƒ¨çš„å›¾ä¾‹ */}
                                <div className="absolute bottom-2 right-2 flex flex-col gap-1 text-[10px] bg-black/50 p-2 rounded">
                                    <div className="flex items-center gap-1"><span className="w-2 h-2 rounded-full bg-green-500"></span> å‰æ™¯å…‰è·¯ (å®çº¿)</div>
                                    <div className="flex items-center gap-1"><span className="w-2 h-2 rounded-full bg-red-400"></span> èƒŒæ™¯å…‰è·¯ (è™šçº¿)</div>
                                </div>
                            </div>
                            
                            {/* æ•™å­¦åˆ†æå¡ç‰‡ */}
                            <div className="flex-1 bg-indigo-50/50 border border-indigo-100 rounded-lg p-3 min-h-0 overflow-hidden flex flex-col justify-center">
                                <h3 className="text-xs font-bold text-indigo-900 flex items-center mb-1">
                                    <Icons.Light className="mr-1" /> åŸç†åˆ†æï¼šä¸ºä»€ä¹ˆå…‰åœˆå½±å“æ¸…æ™°åº¦ï¼Ÿ
                                </h3>
                                <div className="text-xs text-gray-600 space-y-1">
                                    <div className="font-semibold text-gray-800">{analysisText.title}</div>
                                    <ul className="list-disc pl-4 space-y-0.5 opacity-90">
                                        {analysisText.physics.map((t, i) => <li key={i}>{t}</li>)}
                                    </ul>
                                    <div className="mt-1 pt-1 border-t border-indigo-200 text-indigo-800 font-bold flex justify-between items-center">
                                        <span>ğŸ‘‰ {analysisText.keyPoint}</span>
                                        <span className="text-[9px] bg-white px-1 rounded border border-indigo-200 text-gray-400">
                                            æ¨¡ç³Šåº¦: ç»¿{analysisText.blurG} / çº¢{analysisText.blurR}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="flex-1 flex flex-col gap-2 min-w-[240px]">
                            {/* EVF åŒºåŸŸï¼šæ˜¾ç¤ºä¸¤æ£µæ ‘ */}
                            <div className="flex gap-2 h-32">
                                <div className="w-32 bg-black rounded-lg border-2 border-slate-700 relative overflow-hidden flex-shrink-0 shadow-inner group">
                                    <div className="absolute top-1 left-1 text-[9px] text-gray-400 z-10">EVF å–æ™¯</div>
                                    <div className="w-full h-full flex items-center justify-center bg-slate-800 relative">
                                        
                                        {/* çº¢æ ‘ (èƒŒæ™¯ï¼Œæ”¾å³è¾¹ï¼Œæ”¾å°ä¸€ç‚¹) */}
                                        <div style={{
                                            position: 'absolute', right: '15%', top: '40%',
                                            filter: `blur(${blurRed}px)`,
                                            transform: `scale(${getFOV(bgTreeDistance) * 0.7})`,
                                            transition: 'all 0.2s'
                                        }}>
                                            <svg viewBox="0 0 100 100" width="40" height="40">
                                                <path d="M50 10 L10 90 L90 90 Z" fill="#ef4444" />
                                                <rect x="45" y="90" width="10" height="10" fill="#78350f" />
                                            </svg>
                                        </div>

                                        {/* ç»¿æ ‘ (å‰æ™¯ï¼Œæ”¾å·¦è¾¹ï¼Œæ”¾å¤§ä¸€ç‚¹) */}
                                        <div style={{
                                            position: 'absolute', left: '15%', top: '45%',
                                            filter: `blur(${blurGreen}px)`,
                                            transform: `scale(${getFOV(objectDistance) * 0.8})`,
                                            transition: 'all 0.2s'
                                        }}>
                                            <svg viewBox="0 0 100 100" width="50" height="50">
                                                <path d="M50 10 L10 90 L90 90 Z" fill="#22c55e" />
                                                <rect x="45" y="90" width="10" height="10" fill="#78350f" />
                                            </svg>
                                        </div>

                                    </div>
                                    {/* é¼ æ ‡æ‚¬åœæç¤º */}
                                    <div className="absolute bottom-1 w-full text-center text-[9px] text-white/50 opacity-0 group-hover:opacity-100 transition">
                                        å·¦ç»¿(è¿‘) å³çº¢(è¿œ)
                                    </div>
                                </div>

                                <div className="flex-1 flex flex-col justify-between py-1">
                                    <div className="flex flex-col gap-1">
                                        <button onClick={()=>toggleMode('zoom')} className={`text-[10px] py-1.5 px-2 rounded border text-left transition ${lensMode==='zoom'?'bg-blue-50 border-blue-200 text-blue-700 font-bold':'bg-white border-gray-200 text-gray-500'}`}>
                                            <span className="mr-1">ğŸ”“</span> å˜ç„¦
                                        </button>
                                        <button onClick={()=>toggleMode('prime')} className={`text-[10px] py-1.5 px-2 rounded border text-left transition ${lensMode==='prime'?'bg-pink-50 border-pink-200 text-pink-700 font-bold':'bg-white border-gray-200 text-gray-500'}`}>
                                            <span className="mr-1">ğŸ”’</span> å®šç„¦
                                        </button>
                                    </div>
                                    <div className="text-[10px] text-gray-500 px-1 leading-tight">
                                        è¯•è¯•æŠŠå…‰åœˆå¼€å¤§ï¼Œç„¶ååˆ†åˆ«å¯¹ç„¦åœ¨ç»¿æ ‘æˆ–çº¢æ ‘ä¸Šï¼
                                    </div>
                                </div>
                            </div>

                            {/* æ§åˆ¶æ»‘å— */}
                            <div className="flex-1 bg-white border border-gray-200 rounded-lg p-3 flex flex-col justify-evenly">
                                {/* å…‰åœˆ - æ ¸å¿ƒæ§åˆ¶ */}
                                <div className="p-2 bg-slate-50 border border-slate-200 rounded relative">
                                    <div className="absolute -top-2 right-2 bg-yellow-100 text-yellow-800 text-[9px] px-1 rounded border border-yellow-200">è™šåŒ–æ ¸å¿ƒ</div>
                                    <div className="flex justify-between text-[11px] mb-1">
                                        <span className="font-bold text-gray-800">å…‰åœˆ (Aperture)</span>
                                        <span className="text-slate-800 font-mono font-bold">f/{aperture}</span>
                                    </div>
                                    <input type="range" min="1.4" max="22" step="0.1" value={aperture} onChange={e=>setAperture(Number(e.target.value))} className="w-full text-slate-600" />
                                    <div className="flex justify-between text-[9px] text-gray-400 mt-1">
                                        <span>f/1.4 (å¤§å…‰åœˆ/å¼ºè™šåŒ–)</span>
                                        <span>f/22 (å°å…‰åœˆ/å…¨æ¸…æ™°)</span>
                                    </div>
                                </div>

                                {/* å¯¹ç„¦ */}
                                <div className="p-2">
                                    <div className="flex justify-between text-[11px] mb-1">
                                        <span className="font-bold text-gray-700">å¯¹ç„¦è·ç¦» (Focus)</span>
                                        <span className="text-purple-600 font-mono">{focusDistance.toFixed(1)}m</span>
                                    </div>
                                    <input type="range" min="1" max="10" step="0.1" value={focusDistance} onChange={e=>setFocusDistance(Number(e.target.value))} className="w-full text-purple-500" />
                                    <div className="flex justify-between text-[9px] text-gray-400 mt-1">
                                        <span onClick={()=>setFocusDistance(objectDistance)} className="cursor-pointer hover:text-green-600 underline">ç‚¹æ­¤å¯¹ç„¦ç»¿æ ‘</span>
                                        <span onClick={()=>setFocusDistance(bgTreeDistance)} className="cursor-pointer hover:text-red-600 underline">ç‚¹æ­¤å¯¹ç„¦çº¢æ ‘</span>
                                    </div>
                                </div>

                                {/* ç»¿æ ‘ä½ç½® */}
                                <div className="p-2">
                                    <div className="flex justify-between text-[11px] mb-1">
                                        <span className="font-bold text-gray-700">ç»¿æ ‘ä½ç½® (å‰æ™¯)</span>
                                        <span className="text-green-600 font-mono">{objectDistance.toFixed(1)}m</span>
                                    </div>
                                    <input type="range" min="1" max="7" step="0.1" value={objectDistance} onChange={e=>setObjectDistance(Number(e.target.value))} className="w-full text-green-500" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="flex-none pt-2 px-2 mt-1 border-t border-gray-200 bg-gray-50/50">
                        <div className="grid grid-cols-4 gap-2 pb-2">
                            {[
                                {t: "æ™¯æ·± (DOF)", c: "slate", d: "å‰åéƒ½æ¸…æ™°çš„èŒƒå›´ã€‚å…‰åœˆè¶Šå°(f/16)ï¼Œæ™¯æ·±è¶Šå¤§ã€‚"},
                                {t: "å…‰åœˆä¸å…‰æŸ", c: "blue", d: "å…‰åœˆåƒæ°´é¾™å¤´ã€‚å…³å°äº†ï¼Œå‡ºæ¥çš„æ°´æµ(å…‰æŸ)å°±ç»†ï¼Œä¸å®¹æ˜“æ•£å¼€ã€‚"},
                                {t: "å¼¥æ•£åœ†", c: "red", d: "çœ‹ä¾§è§†å›¾é‡Œçº¢è‰²çš„èƒŒæ™¯å…‰è·¯ï¼Œåœ¨ä¼ æ„Ÿå™¨ä¸Šå½¢æˆäº†ä¸€ä¸ªå®½å®½çš„çº¢æ–‘ï¼Œè¿™å°±æ˜¯è™šåŒ–ã€‚"},
                                {t: "å‰ç„¦/åç„¦", c: "purple", d: "ç»¿æ ‘å¯¹å‡†äº†ï¼Œçº¢æ ‘çš„åƒå°±è½åœ¨ä¼ æ„Ÿå™¨å‰é¢(å‰ç„¦)ï¼Œåä¹‹äº¦ç„¶ã€‚"}
                            ].map((item, i) => (
                                <div key={i} className="term-card bg-white p-2 rounded border border-gray-200 text-gray-600 cursor-help" title={item.d}>
                                    <div className={`text-[10px] font-bold text-${item.c}-600 mb-0.5`}>{item.t}</div>
                                    <div className="text-[9px] leading-tight opacity-90">{item.d}</div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CameraOpticsLab />);
    </script>
</body>
</html>